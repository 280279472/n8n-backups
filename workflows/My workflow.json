{"createdAt":"2025-07-29T08:42:34.552Z","updatedAt":"2025-07-29T08:43:33.000Z","id":"83djkZ4NWmEpxwm7","name":"My workflow","active":false,"isArchived":true,"nodes":[{"parameters":{},"id":"58cb088e-cd29-4da9-92ef-c79c826f4789","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Start Tutorial","type":"n8n-nodes-base.manualTrigger","creator":"Lucas Peyrin","position":[-6900,1080],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"# 教程 - 掌握n8n表达式\n\n欢迎！您已经了解JSON是什么。现在，让我们学习如何**使用它**。本工作流将教您如何从一个节点提取数据，并使用n8n强大的表达式在另一个节点中使用这些数据。\n\n**什么是表达式？**\n表达式是双花括号`{{ }}`内的一小段代码，在工作流运行时会被动态值替换。它是连接各个节点的\"粘合剂\"。\n\n**如何使用本教程：**\n1. 第一个节点**\"源数据\"**包含我们将使用的所有数据。执行一次以查看其中的内容。\n2. 按照从上到下的路径进行操作。每个节点都是一个新课程。\n3. 阅读每个课程的便签说明，然后查看节点的配置及其输出以理解概念。","height":560,"width":640,"color":5},"id":"193ce454-dfb3-42fd-a8ca-3288970559a7","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-7160,680],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"name","type":"string","value":"Alice"},{"id":"67890","name":"age","type":"number","value":30},{"id":"abcde","name":"is_active","type":"boolean","value":true},{"id":"fghij","name":"skills","type":"array","value":"[\"JavaScript\",\"Python\",\"n8n\"]"},{"id":"klmno","name":"projects","type":"array","value":"[{\"name\":\"Project A\",\"status\":\"Done\"},{\"name\":\"Project B\",\"status\":\"In Progress\"}]"},{"id":"pqrst","name":"contact","type":"object","value":"{\"email\":\"alice@example.com\",\"phone\":null}"}]},"options":{}},"id":"5b5d7323-fc9c-455e-9f8b-a7dbe8dd371a","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Source Data","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-6260,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 我们的数据源\n\n该节点包含了本教程的所有示例数据。您可以将其视为一个文件柜，其他所有节点都将从这个文件柜中提取特定的信息片段。\n\n查看其输出以熟悉数据结构。我们包含：\n- 简单文本（`name`）\n- 数字（`age`）\n- 技能列表（`skills`）\n- 复杂项目列表（`projects`）\n- 嵌套的联系对象（`contact`）","height":380,"width":540,"color":7},"id":"1ab891bc-5ac0-45e2-af77-81cbefbe0dc3","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-6500,720],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"user_name","type":"string","value":"={{ $('Source Data').item.json.name }}"}]},"options":{}},"id":"6054f13f-f9ef-4d5e-8d68-d8494dc2a4c5","cid":"Ikx1Y2FzIFBleXJpbiI","name":"1. The Basics","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-5740,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第一课：获取简单值\n\n这是你在n8n中最常做的操作。\n\n**目标：** 从\"Source Data\"节点获取用户姓名。\n\n**表达式：** `{{ $('Source Data').item.json.name }}`\n\n**解析：**\n- `{{ ... }}`：告诉n8n\"这是一个动态表达式\"\n- `$('Source Data')`：选择我们要获取数据的节点\n- `.item.json`：限定到当前项的JSON数据\n- `.name`：选择我们想要获取值的特定键\n\n**其他可能性：**\n在本例中，`{{ $json.name }}`同样适用，因为`$json`会访问来自前一个节点的数据。","height":580,"width":500,"color":2},"id":"c95f7af2-837c-4314-9ddf-4ffc8c54e051","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-5940,680],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"second_skill","type":"string","value":"={{ $('Source Data').last().json.skills[1] }}"}]},"options":{}},"id":"209c067b-967c-4d50-9190-bb15610115b1","cid":"Ikx1Y2FzIFBleXJpbiI","name":"3. Working with Arrays","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-4500,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第3课：访问数组元素\n\n如果数据在一个列表（数组）中怎么办？你需要指定你想要的是*哪一项*。\n\n**目标：** 获取用户的*第二项*技能。\n\n**表达式：** `{{ $('Source Data').last().json.skills[1] }}`\n\n**解析：**\n- `...skills`：选择技能数组。\n- `[1]`：选择特定位置的项。\n- **重要提示：** 数组是\"从零开始索引\"的，这意味着第一项是`[0]`，第二项是`[1]`，第三项是`[2]`，以此类推。","height":520,"width":540,"color":4},"id":"e1db23c7-1028-4a7f-8f1d-9069d22e1566","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-4720,720],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"user_email","type":"string","value":"={{ $('Source Data').last().json.contact.email }}"}]},"options":{}},"id":"fa7ddb4f-bc6e-417d-89ba-bf4844343dd6","cid":"Ikx1Y2FzIFBleXJpbiI","name":"4. Going Deeper","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-3940,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第4课：访问嵌套数据\n\n有时，数据会被组织成对象中的对象。\n\n**目标：** 获取用户的电子邮件地址。\n\n**表达式：** `{{ $('Source Data').last().json.contact.email }}`\n\n**解析：**\n- `...contact`：首先，我们访问 `contact` 对象。\n- `.email`：然后，我们使用另一个点 `.` 深入一层，获取其中 `email` 键的值。\n\n","height":480,"width":540,"color":5},"id":"ea336e50-f901-43f7-ba2a-6ece44360ef9","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-4160,760],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"first_project_status","type":"string","value":"={{ $('Source Data').last().json.projects[0].status }}"}]},"options":{}},"id":"c43b4c82-2afa-42c9-991f-454491a271c8","cid":"Ikx1Y2FzIFBleXJpbiI","name":"5. The Combo Move","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-3360,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第5课：访问对象数组中的数据\n\n这是对之前课程内容的终极考验！\n\n**目标：** 获取列表中*第一个*项目的*状态*。\n\n**表达式：** `{{ $('Source Data').last().json.projects[0].status }}`\n\n**解析：**\n1. `...projects`：我们选择项目数组。\n2. `[0]`：我们选取该数组中的第一个对象。\n3. `.status`：从选定的对象中，我们获取`status`键的值。","height":480,"width":580,"color":6},"id":"faf98e71-db34-49df-b65d-a6ad5575dcd8","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-3600,760],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"name_in_caps","type":"string","value":"={{ $('Source Data').last().json.name.toUpperCase() }}"},{"id":"67890","name":"age_in_dog_years","type":"number","value":"={{ Math.round($('Source Data').last().json.age / 7) }}"},{"id":"abcde","name":"age_data_type","type":"string","value":"={{ typeof $('Source Data').last().json.age }}"}]},"options":{}},"id":"cbf59037-a9e5-4ff5-9093-578b3f5ec56d","cid":"Ikx1Y2FzIFBleXJpbiI","name":"6. A Touch of Magic","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-2740,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第六课：魔法初体验（JS函数篇）\n\n你不仅能获取数据，还能**操控和检测它**！\n\n**表达式示例：**\n- **文本变形术**：`{{ $('Source Data').last().json.name.toUpperCase() }}`\n- **数字炼金术**：`{{ Math.round($('Source Data').last().json.age / 7) }}`\n- **类型鉴别术**：`{{ typeof $('Source Data').last().json.age }}`\n\n**咒语解析：**\n- **`.toUpperCase()`**：字符串的标准化身咒\n- **`Math.round(...)`**：调用数学神器的圆整咒\n- **`typeof`**：揭示数据真身的照妖镜（可识别\"string\"、\"number\"、\"object\"等类型）","height":520,"width":580,"color":3},"id":"6d3db95f-e08d-490c-b369-ef4bbd5eac63","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-2980,740],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"all_skills_string","type":"string","value":"={{ $('Split Out Skills').all().map(item => item.json.skills).join(', ') }}"}]},"options":{}},"id":"08738b8b-aff7-41c5-bec3-237a54fa1dc9","cid":"Ikx1Y2FzIFBleXJpbiI","name":"9. The \"All Items\" View","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-820,1080],"executeOnce":true,"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第9课：处理多个项目（`$items`与箭头函数）\n\n如果一个节点输出*多个*项目，而你想对它们进行汇总，`$items()`就是你的工具。\n\n**目标：**获取用户所有技能组成的单个逗号分隔字符串。\n\n**表达式：**`{{ $('Split Out Skills').all().map(item `=>` item.json.skills).join(', ') }}`\n\n**什么是`item => ...`？**\n这是一个**箭头函数**，表示\"对每个元素执行此操作\"的简写方式：\n- `item`：遍历列表时为每个元素临时命名的变量\n- =>：分隔元素与操作的\"箭头\"符号\n- `item.json.skills`：要执行的操作——此处表示从元素中获取技能值","height":520,"width":780,"color":5},"id":"5b31f7d9-1d47-4be8-8b5b-29909a4a621d","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note7","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-1240,740],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"final_summary","type":"string","value":"=User {{ $('2. The n8n Selectors').last().json.user_name_from_first }} is {{ $('Source Data').last().json.age }}.\n\nTheir best skill is {{ $('3. Working with Arrays').last().json.second_skill }}.\n\nTheir first project was {{ $('Source Data').last().json.projects[0].name }}, which is now {{ $('5. The Combo Move').last().json.first_project_status }}.\n\nAll skills: {{ $('9. The \"All Items\" View').last().json.all_skills_string }}."}]},"options":{}},"id":"dbb7068c-4144-400b-a365-d50d02c282e4","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Final Exam","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-240,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 🎓 期末考试：融会贯通\n\n本节点运用我们学到的所有知识构建一个最终的摘要对象。\n\n查看每个字段的表达式。它们从不同节点提取数据，并运用了你刚刚练习过的各种技巧。\n\n**恭喜！你现在已掌握将数据关联起来并在n8n中构建强大动态工作流的基础知识。**","height":420,"width":520,"color":6},"id":"cc255f50-e220-4036-8bab-34aee893a9dc","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-440,840],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"user_name_from_first","type":"string","value":"={{ $('Source Data').last().json.name }}"}]},"options":{}},"id":"3e9ff97b-c058-4d86-8808-a0473078906c","cid":"Ikx1Y2FzIFBleXJpbiI","name":"2. The n8n Selectors","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-5120,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第二课：n8n选择器（`.first()`、`.last()`、`.all()`）\n\n在上节课中，我们使用了`.item`。当节点仅输出一个项目时，这等同于`.last()`。显式使用`.last()`通常更安全、更清晰。\n\n**目标：** 使用`.last()`选择器获取用户姓名。\n\n**表达式：** `{{ $('Source Data').last().json.name }}`\n\n**为什么这样更好？**\n如果某个节点返回多个项目，`.last()`能确保你只获取最后一个项目的数据。\n\n如果需要将所选数据与输入项目匹配，这时`.item`就无法被替代。\n\n**其他选择器：**\n- **`.first()`**：获取第一个项目的数据。\n- **`.all()`**：获取所有项目的数据，返回一个对象数组。（这与`$items`不同！）\n\n","height":620,"width":680},"id":"c3995bc2-1497-4c1e-be29-3079a981b03b","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note9","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-5420,620],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"contact_keys","type":"array","value":"={{ Object.keys($('Source Data').last().json.contact) }}"}]},"options":{}},"id":"1d502e65-93cb-40df-8a71-20cef06c5e58","cid":"Ikx1Y2FzIFBleXJpbiI","name":"7. Inspecting Objects","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-2180,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第7课：检查对象（`Object.keys()`）\n\n如果你有一个对象，但不知道它里面有哪些键怎么办？`Object.keys()` 可以帮你解决这个问题。\n\n**目标：** 获取 `contact` 对象中所有键的列表。\n\n**表达式：** `{{ Object.keys($('Source Data').last().json.contact) }}`\n\n这对于动态处理数据非常有用。它会返回一个包含键名的**数组**（例如 `[\"email\", \"phone\"]`）。","height":520,"width":500,"color":2},"id":"6987c90d-1636-4baf-8a26-b3291d1ec31a","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note10","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-2380,740],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"assignments":{"assignments":[{"id":"12345","name":"contact_as_string","type":"string","value":"={{ JSON.stringify($('Source Data').last().json.contact, null, 2) }}"},{"id":"06003b65-7482-4d5a-b2c0-1794859ab461","name":"skills","type":"array","value":"={{ $('Source Data').last().json.skills }}"}]},"options":{}},"id":"e1f34384-355c-44cf-8591-746cafc9e95f","cid":"Ikx1Y2FzIFBleXJpbiI","name":"8. Utility Functions","type":"n8n-nodes-base.set","creator":"Lucas Peyrin","position":[-1620,1080],"typeVersion":3.4,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## 第8课：实用函数（`JSON.stringify()`）\n\n有时你需要将一个结构化的JSON对象转换回一个简洁的单一字符串。这在向其他服务发送数据时很常见，比如在AI提示中。\n\n**目标：** 将整个`contact`对象转换为格式化的字符串。\n\n**表达式：** `{{ JSON.stringify($('Source Data').last().json.contact, null, 2) }}`\n\n**解析：**\n- **`JSON.stringify(...)`**：执行转换的函数。\n- **`null, 2`**：这些可选参数告诉它以2个空格的缩进“美化打印”字符串，使其更易读。","height":520,"width":580},"id":"36567956-2b96-415c-a365-c8e4be66931c","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note11","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-1860,740],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"fieldToSplitOut":"skills","include":"allOtherFields","options":{}},"id":"8f3604f7-e91d-4867-b77f-be036581c1ba","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Split Out Skills","type":"n8n-nodes-base.splitOut","creator":"Lucas Peyrin","position":[-1040,1080],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## Was this helpful? Let me know!\n[![clic](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/clic_down_lucas.gif)](https://n8n.ac)\n\n衷心希望本教程能帮助你更好地理解n8n表达式。你的反馈极其宝贵，能帮助我为n8n社区创造更优质的内容。\n\n### **分享你的想法与建议**\n\n无论你有改进建议、发现笔误，还是单纯想表达感谢，我都非常期待听到你的声音！\n为此我专门搭建了一个简易的n8n表单：\n\n#### ➡️ **[Click here to give feedback](https://api.ia2s.app/form/templates/feedback?template=Expressions%20Tutorial)**\n\n### **准备好打造非凡成果了吗？**\n\n如果你想将n8n技能或业务自动化提升到新高度，我可以助你一臂之力。\n\n**🎓 n8n专业指导：** 想成为n8n专家？我提供一对一辅导课程，帮助你掌握工作流程、解决具体问题并自信构建自动化方案。  \n#### ➡️ **[预约辅导课程](预约链接)**(https://api.ia2s.app/form/templates/coaching?template=Expressions%20Tutorial)**\n\n**💼 n8n Consulting:** Have a complex project, an integration challenge, or need a custom workflow built for your business? Let's work together to create a powerful automation solution.\n#### ➡️ **[Inquire About Consulting Services](https://api.ia2s.app/form/templates/consulting?template=Expressions%20Tutorial)**\n\n---\n\nHappy Automating!\nLucas Peyrin | [n8n Academy](https://n8n.ac)","height":1280,"width":540,"color":3},"id":"6d48d4e4-4804-4a36-8a7e-aff5ead8f14f","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note12","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[100,-40],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"},{"parameters":{"content":"## [>> Go to Eval Workflow <<](https://n8n.io/workflows/6236)\n\n通过完整的评估流程验证您的技能，全面检验您的表达能力。\n[![Test Skills](https://supastudio.ia2s.app/storage/v1/object/public/assets/n8n/test_your_skillls_button.gif)](https://n8n.io/workflows/6236)","height":408,"width":512,"color":6},"id":"0409f10c-f84e-4a10-b8b5-4c660ba0cc7b","cid":"Ikx1Y2FzIFBleXJpbiI","name":"Sticky Note15","type":"n8n-nodes-base.stickyNote","creator":"Lucas Peyrin","position":[-440,400],"typeVersion":1,"notes":"© 2025 Lucas Peyrin"}],"connections":{"Source Data":{"main":[[{"node":"1. The Basics","type":"main","index":0}]]},"1. The Basics":{"main":[[{"node":"2. The n8n Selectors","type":"main","index":0}]]},"Start Tutorial":{"main":[[{"node":"Source Data","type":"main","index":0}]]},"4. Going Deeper":{"main":[[{"node":"5. The Combo Move","type":"main","index":0}]]},"Split Out Skills":{"main":[[{"node":"9. The \"All Items\" View","type":"main","index":0}]]},"5. The Combo Move":{"main":[[{"node":"6. A Touch of Magic","type":"main","index":0}]]},"6. A Touch of Magic":{"main":[[{"node":"7. Inspecting Objects","type":"main","index":0}]]},"2. The n8n Selectors":{"main":[[{"node":"3. Working with Arrays","type":"main","index":0}]]},"8. Utility Functions":{"main":[[{"node":"Split Out Skills","type":"main","index":0}]]},"7. Inspecting Objects":{"main":[[{"node":"8. Utility Functions","type":"main","index":0}]]},"3. Working with Arrays":{"main":[[{"node":"4. Going Deeper","type":"main","index":0}]]},"9. The \"All Items\" View":{"main":[[{"node":"Final Exam","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"64ed3dc7-a5cb-4de3-b64e-e62a6d4ecc16","triggerCount":0,"shared":[{"createdAt":"2025-07-29T08:42:34.578Z","updatedAt":"2025-07-29T08:42:34.578Z","role":"workflow:owner","workflowId":"83djkZ4NWmEpxwm7","projectId":"EZ8bcuL9uFigLvTh"}],"tags":[]}